<header id="header" class="site-header" role="banner">
  <!-- Mobile topbar (hidden >=768px) -->
  <div class="topbar" aria-hidden="true">
    <button
      class="menu-toggle"
      aria-controls="site-nav"
      aria-expanded="false"
      aria-label="Open menu"
      data-menu-toggle
    >
      <svg class="menu-icon" width="48" height="48" viewBox="0 0 48 48" aria-hidden="true" focusable="false" role="img">
        <defs>
          <!-- Top: light gray gradient -->
          <linearGradient id="menu-cube-top" x1="0" y1="4" x2="0" y2="24" gradientUnits="userSpaceOnUse">
            <stop offset="0%" stop-color="#f5f5f5"/>
            <stop offset="100%" stop-color="#e0e0e0"/>
          </linearGradient>
          <!-- Left: medium gray gradient -->
          <linearGradient id="menu-cube-left" x1="7" y1="14" x2="24" y2="44" gradientUnits="userSpaceOnUse">
            <stop offset="0%" stop-color="#bdbdbd"/>
            <stop offset="100%" stop-color="#9e9e9e"/>
          </linearGradient>
          <!-- Right: dark gray gradient -->
          <linearGradient id="menu-cube-right" x1="41" y1="14" x2="24" y2="44" gradientUnits="userSpaceOnUse">
            <stop offset="0%" stop-color="#757575"/>
            <stop offset="100%" stop-color="#424242"/>
          </linearGradient>
        </defs>
        <polygon class="face-top" points="24 4, 41 14, 24 24, 7 14"/>
        <polygon class="face-left" points="7 14, 24 24, 24 44, 7 34"/>
        <polygon class="face-right" points="41 14, 24 24, 24 44, 41 34" />
        <title>Open navigation</title>
      </svg>
    </button>
  </div>

  <!-- Navigation: mobile overlay / desktop right rail -->
  <nav id="site-nav" class="site-nav" aria-label="Primary">
    <div class="site-nav__inner">
      <a class="brand-large" href="/">hanul</a>

      <ul class="nav-list" role="list">
        <li><a href="/projects">projects</a></li>
        <li><a href="/sketches">sketches</a></li>
      </ul>

      <button class="menu-close" aria-label="Close menu" data-menu-close></button>
    </div>

    <button class="nav-overlay" aria-hidden="true" tabindex="-1" data-menu-close></button>
  </nav>
</header>

<script is:inline>
  (() => {
    const nav = document.getElementById("site-nav");
    const toggle = document.querySelector("[data-menu-toggle]");
    const closers = document.querySelectorAll("[data-menu-close]");
    const body = document.body;

    const openNav = () => {
      nav.classList.add("open");
      body.classList.add("nav-open");
      toggle?.setAttribute("aria-expanded", "true");
    };
    const closeNav = () => {
      nav.classList.remove("open");
      body.classList.remove("nav-open");
      toggle?.setAttribute("aria-expanded", "false");
    };

    toggle?.addEventListener("click", () => {
      nav.classList.contains("open") ? closeNav() : openNav();
    });
    closers.forEach((el) => el.addEventListener("click", closeNav));
    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeNav();
    });
  })();
</script>
