---
import DetailLayout from "../../layouts/DetailLayout.astro";
import { getProjectBySlug } from "../../data/projects";

const project = getProjectBySlug("bird-dress");
if (!project) {
  throw new Error("Project data not found for 'bird-dress'");
}

const {
  title,
  synopsis,
  year,
  domains = [],
  links = [],
  tools,
  language,
} = project;

// Auto-collect & sort outputs from /public/projects/bird-dress
const sixHourEntries = Object.entries(
  import.meta.glob("/public/projects/bird-dress/6hrs*.*", {
    eager: true,
    as: "url",
  }),
);
const nineHourEntries = Object.entries(
  import.meta.glob("/public/projects/bird-dress/9hrs*.*", {
    eager: true,
    as: "url",
  }),
);

// Sort numerically by filename and map to plain URLs
const sixHourImgs = sixHourEntries
  .sort(([a], [b]) => a.localeCompare(b, undefined, { numeric: true }))
  .map(([, url]) => url as string);

const nineHourImgs = nineHourEntries
  .sort(([a], [b]) => a.localeCompare(b, undefined, { numeric: true }))
  .map(([, url]) => url as string);
---

<DetailLayout {title} {synopsis} {year} {domains} {links} {tools} {language}>
  <section class="text">
    <h6 class="section">I. CONCEPT</h6>

    <p class="subject">OVERVIEW</p>
    <p class="text">
      BirDress is an exploratory project that uses StyleGAN to draw visual
      parallels between organic avian forms and contemporary haute couture. It
      investigates how machine learning can translate structural and textural
      cues from nature into fashion-adjacent imagery.
    </p>

    <p class="subject">MOTIVATION</p>
    <p class="text">
      The project asks how organic life forms might inform design language.
      While an ecological focus on extinct species was considered, limited
      imagery shifted the emphasis toward visual experimentation and dataset
      curation.
    </p>

    <p class="subject">APPROACH</p>
    <p class="text">
      Training was performed with curated bird and fashion image sets. To
      stabilize outputs, datasets were preprocessed for axial alignment so
      aspect ratios and orientations corresponded before StyleGAN training.
    </p>
  </section>

  <section class="text">
    <h6 class="section">II. DATA</h6>

    <p class="subject">DOMAINS</p>
    <figure class="detailImage">
      <img
        src="/projects/bird-dress/Domains.png"
        alt="Reference domains map for BirDress"
        loading="lazy"
      />
    </figure>

    <p class="subject">DATASETS</p>
    <p class="text">
      <strong>Bird imagery:</strong> Caltech-UCSD Birds 200 (CUB-200-2011) refined
      to 83 curated images across visually distinctive species.
      <br /><br />
      <strong>Fashion imagery:</strong> 400 images collected from Iris van Herpenâ€™s
      haute couture collections for their kinetic, organic qualities.
    </p>

    <figure class="detailImage">
      <img
        src="/projects/bird-dress/Dataset_Birds.png"
        alt="Curated bird dataset montage"
        loading="lazy"
      />
    </figure>

    <p class="subject">MODEL TRAINING</p>
    <p class="text">
      Early runs with single-domain data under-performed. Preprocessing both
      datasets to align orientation and crop yielded more coherent hybrid
      outputs, indicating visual structure and alignment can matter more than
      dataset size at short training horizons.
    </p>
  </section>

  <section class="text">
    <h6 class="section">III. RESULTS</h6>
    <p class="subject">6 HOURS</p>
    <div class="gallery gallery--full">
      {
        sixHourImgs.map((src, i) => (
          <img
            class="detailImage"
            src={src}
            alt={`6-hour output ${i + 1}`}
            loading="lazy"
          />
        ))
      }
    </div>
    <p class="subject">9 HOURS</p>
    <div class="gallery gallery--full">
      {
        nineHourImgs.map((src, i) => (
          <img
            class="detailImage"
            src={src}
            alt={`9-hour output ${i + 1}`}
            loading="lazy"
          />
        ))
      }
    </div>
  </section>

  <section class="text">
    <h6 class="section">IV. POSTERS</h6>
    <div
      class="gallery gallery--docs gallery--full"
      aria-label="BirDress posters"
    >
      <img
        src="/projects/bird-dress/poster_1.JPEG"
        alt="BirDress poster 1"
        loading="lazy"
      />
      <img
        src="/projects/bird-dress/poster_2.JPEG"
        alt="BirDress poster 2"
        loading="lazy"
      />
      <img
        src="/projects/bird-dress/poster_3.JPEG"
        alt="BirDress poster 3"
        loading="lazy"
      />
      <p class="text">
        <em
          >Created in the style of, and as an homage to, designer <a
            class="work-link work-link--external"
            href="http://www.davidcarsondesign.com/"
            target="_blank"
            rel="noopener noreferrer">David Carson</a
          >.</em
        >
      </p>
    </div>
  </section>

  <section class="text">
    <h6 class="section">VI. INSIGHTS</h6>
    <p class="subject">TECHNICAL</p>
    <p class="text">
      Visual structure and axial alignment impacted short-horizon training more
      than raw dataset size.
    </p>

    <p class="subject">CONCEPTUAL</p>
    <p class="text">
      Intentional curation enables StyleGAN to generate compelling abstractions
      that merge fashion and nature imagery.
    </p>
  </section>
</DetailLayout>
